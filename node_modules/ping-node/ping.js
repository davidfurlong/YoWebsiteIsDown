
(function(){
	var servers = require('./servers.json'); require('colors');

	function ping(s, cb){
		require('http').get(s, function(e){
				cb({time: new Date(), server: s, status: e.statusCode});
		}).on('error', function(e){
				cb({time: new Date(), server: s, error: e.message});
		})
	}

	function display(o){
		if(o.status && o.status==200) console.log(JSON.stringify(o).green);
		if(o.error){
			console.log(JSON.stringify(o).red);
			Yo = require("yo-api")
			yo = new Yo "65cda6b5-79f7-e612-4cd3-e1194ee45f27"
			yo.yo "DAVIDFURL", (err, res, body) ->
		} 
	}

	for(i in servers){
			ping(i, display);
	}
	setTimeout(arguments.callee, (process.env.min||10) *60000);
})();